<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tà Xùa - Khám Phá Vẻ Đẹp Núi Rừng Tây Bắc</title>
    <meta name="description" content="Khám phá vẻ đẹp hùng vĩ của Tà Xùa, Sơn La với những trải nghiệm độc đáo về văn hóa H'Mông, chè Shan Tuyết cổ thụ và biển mây bạt ngàn." />
    <meta name="author" content="Tà Xùa" />

    <meta property="og:title" content="Tà Xùa - Khám Phá Vẻ Đẹp Núi Rừng Tây Bắc" />
    <meta property="og:description" content="Khám phá vẻ đẹp hùng vĩ của Tà Xùa, Sơn La với những trải nghiệm độc đáo về văn hóa H'Mông, chè Shan Tuyết cổ thụ và biển mây bạt ngàn." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- AI Chatbot Tà Xùa -->
    <script>
      // Tạo chatbot hoạt động thực tế
      function createTaXuaChatbot() {
        // Tạo container cho chatbot
        const chatContainer = document.createElement('div');
        chatContainer.id = 'taxua-chatbot';
        chatContainer.style.cssText = `
          position: fixed;
          bottom: 20px;
          right: 20px;
          width: 60px;
          height: 60px;
          background: linear-gradient(135deg, #10b981, #059669);
          border-radius: 50%;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
          z-index: 9999;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.3s ease;
          animation: pulse 2s infinite;
        `;
        
        // Thêm animation pulse
        const style = document.createElement('style');
        style.textContent = `
          @keyframes pulse {
            0% { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
            50% { box-shadow: 0 4px 20px rgba(16, 185, 129, 0.6); }
            100% { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
          }
        `;
        document.head.appendChild(style);
        
        // Thêm icon chat
        chatContainer.innerHTML = `
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `;

        // Tạo cửa sổ chat
        const chatWindow = document.createElement('div');
        chatWindow.id = 'taxua-chat-window';
        chatWindow.style.cssText = `
          position: fixed;
          bottom: 90px;
          right: 20px;
          width: 380px;
          height: 520px;
          background: white;
          border-radius: 16px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
          z-index: 9998;
          display: none;
          flex-direction: column;
          overflow: hidden;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        `;

        chatWindow.innerHTML = `
          <div style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center;">
            <div>
              <h3 style="margin: 0; font-size: 18px; font-weight: 600;">🏔️ Tà Xùa Assistant</h3>
              <p style="margin: 4px 0 0 0; font-size: 12px; opacity: 0.9;">Hỗ trợ du lịch Tà Xùa 24/7</p>
            </div>
            <button id="close-chat" style="background: rgba(255,255,255,0.2); border: none; color: white; cursor: pointer; font-size: 20px; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">&times;</button>
          </div>
          <div id="chat-messages" style="flex: 1; padding: 20px; overflow-y: auto; background: #f8fafc; display: flex; flex-direction: column; gap: 12px;">
            <div style="background: white; padding: 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid #10b981;">
              <p style="margin: 0; color: #374151; line-height: 1.5;">👋 Xin chào! Tôi là trợ lý AI của Tà Xùa. Tôi có thể giúp bạn:</p>
              <div style="margin-top: 12px; display: flex; flex-wrap: gap: 8px;">
                <button class="quick-btn" data-msg="Thông tin về địa điểm lưu trú" style="background: #f0fdf4; color: #166534; border: 1px solid #bbf7d0; padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer;">🏠 Lưu trú</button>
                <button class="quick-btn" data-msg="Các điểm tham quan ở Tà Xùa" style="background: #f0fdf4; color: #166534; border: 1px solid #bbf7d0; padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer;">📍 Điểm tham quan</button>
                <button class="quick-btn" data-msg="Thời tiết và mùa đẹp nhất để đi Tà Xùa" style="background: #f0fdf4; color: #166534; border: 1px solid #bbf7d0; padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer;">🌤️ Thời tiết</button>
              </div>
            </div>
          </div>
          <div style="padding: 16px; border-top: 1px solid #e5e7eb; background: white;">
            <div style="display: flex; gap: 8px; align-items: center;">
              <input id="chat-input" type="text" placeholder="Hỏi về Tà Xùa..." style="flex: 1; padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 25px; outline: none; font-size: 14px; transition: border-color 0.2s;">
              <button id="send-btn" style="background: #10b981; color: white; border: none; padding: 12px 16px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </div>
        `;

        // Dữ liệu phản hồi AI
        const responses = {
          'lưu trú': 'Tà Xùa có nhiều homestay tuyệt vời như 1941M Homestay, May Home, Tà Xùa Ecolodge. Giá từ 300-800k/đêm. Bạn muốn biết chi tiết homestay nào?',
          'điểm tham quan': 'Các điểm must-visit ở Tà Xùa: 🌄 Đỉnh Tà Xùa (xem biển mây), 🌲 Rừng chè Shan Tuyết cổ thụ, 🏔️ Đỉnh Phu Sang (cao nhất), 🌅 Điểm ngắm sunrise tại đỉnh núi.',
          'thời tiết': 'Thời gian đẹp nhất: Tháng 10-4 (khô ráo, biển mây đẹp). Tháng 12-2: lạnh nhất, có thể có băng giá. Tháng 5-9: mùa mưa, đường khó đi.',
          'ăn uống': 'Đặc sản Tà Xùa: Thịt trâu gác bếp, cá suối nướng, rau rừng, chè Shan Tuyết. Homestay thường phục vụ cơm gia đình 150-200k/suất.',
          'di chuyển': 'Từ Hà Nội: 280km, đi qua Hòa Bình - Mộc Châu - Bắc Yên. Đường cuối khá khó, cần xe máy/ô tô địa hình. Có thể thuê xe máy tại Bắc Yên.',
          'default': 'Tôi hiểu bạn quan tâm về Tà Xùa! Bạn có thể hỏi về: lưu trú, điểm tham quan, thời tiết, ăn uống, di chuyển, hoặc bất kỳ thông tin nào khác về Tà Xùa. 😊'
        };

        function getAIResponse(message) {
          const msg = message.toLowerCase();
          for (let key in responses) {
            if (msg.includes(key)) {
              return responses[key];
            }
          }
          return responses.default;
        }

        function addMessage(content, isUser = false) {
          const messagesContainer = chatWindow.querySelector('#chat-messages');
          const messageDiv = document.createElement('div');
          
          if (isUser) {
            messageDiv.style.cssText = `
              background: #10b981; color: white; padding: 12px 16px; border-radius: 18px 18px 4px 18px; 
              max-width: 80%; align-self: flex-end; margin-left: auto; font-size: 14px; line-height: 1.4;
            `;
          } else {
            messageDiv.style.cssText = `
              background: white; color: #374151; padding: 16px; border-radius: 12px; 
              box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-left: 4px solid #10b981; 
              font-size: 14px; line-height: 1.5;
            `;
          }
          
          messageDiv.textContent = content;
          messagesContainer.appendChild(messageDiv);
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Sự kiện
        chatContainer.addEventListener('click', function() {
          const isVisible = chatWindow.style.display === 'flex';
          chatWindow.style.display = isVisible ? 'none' : 'flex';
          if (!isVisible) {
            chatWindow.querySelector('#chat-input').focus();
          }
        });

        chatWindow.querySelector('#close-chat').addEventListener('click', function() {
          chatWindow.style.display = 'none';
        });

        // Xử lý gửi tin nhắn
        function sendMessage() {
          const input = chatWindow.querySelector('#chat-input');
          const message = input.value.trim();
          if (message) {
            addMessage(message, true);
            input.value = '';
            
            // Hiệu ứng typing
            setTimeout(() => {
              const response = getAIResponse(message);
              addMessage(response);
            }, 800);
          }
        }

        chatWindow.querySelector('#send-btn').addEventListener('click', sendMessage);
        chatWindow.querySelector('#chat-input').addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            sendMessage();
          }
        });

        // Quick buttons
        chatWindow.addEventListener('click', function(e) {
          if (e.target.classList.contains('quick-btn')) {
            const message = e.target.dataset.msg;
            addMessage(message, true);
            setTimeout(() => {
              const response = getAIResponse(message);
              addMessage(response);
            }, 800);
          }
        });

        // Hover effects
        chatWindow.querySelector('#send-btn').addEventListener('mouseenter', function() {
          this.style.background = '#059669';
        });
        chatWindow.querySelector('#send-btn').addEventListener('mouseleave', function() {
          this.style.background = '#10b981';
        });

        chatWindow.querySelector('#chat-input').addEventListener('focus', function() {
          this.style.borderColor = '#10b981';
        });
        chatWindow.querySelector('#chat-input').addEventListener('blur', function() {
          this.style.borderColor = '#e5e7eb';
        });

        // Thêm vào trang
        document.body.appendChild(chatContainer);
        document.body.appendChild(chatWindow);
      }

      // Khởi tạo chatbot khi trang load
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', createTaXuaChatbot);
      } else {
        createTaXuaChatbot();
      }
    </script>
  </body>
</html>
